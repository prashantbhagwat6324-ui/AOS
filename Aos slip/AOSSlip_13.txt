Slip 13

Q1. Write a C program that illustrates suspending and resuming processes using signals

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>
#include <sys/types.h>
#include <sys/wait.h>

// Signal handler for child termination
void signal_handler(int signum) {
    printf("Child process received signal %d, terminating...\n", signum);
    exit(0);
}

void child_process() {
    signal(SIGTERM, signal_handler);  // Register signal handler for termination
    printf("[Child] Process started (PID: %d)\n", getpid());

    // Infinite loop to simulate work
    while (1) {
        printf("[Child] Running...\n");
        sleep(1);
    }
}

int main() {
    pid_t pid = fork();

    if (pid < 0) {
        perror("Fork failed");
        exit(1);
    }

    if (pid == 0) {
        // Child process
        child_process();
    } else {
        // Parent process
        printf("[Parent] Parent process started (PID: %d)\n", getpid());
        printf("[Parent] Child process (PID: %d) will run for 3 seconds\n", pid);
        sleep(3);

        // Suspend the child process
        printf("[Parent] Suspending child process\n");
        kill(pid, SIGSTOP);

        sleep(3);

        // Resume the child process
        printf("[Parent] Resuming child process\n");
        kill(pid, SIGCONT);

        // Let the child run for another 3 seconds
        sleep(3);

        // Terminate the child process
        printf("[Parent] Terminating child process\n");
        kill(pid, SIGTERM);

        // Wait for the child to terminate
        wait(NULL);
        printf("[Parent] Child process terminated\n");
    }

    return 0;
}

gcc -o signal_control slip13_1.c  (compile)
./signal_control  (run)


Q2. Write a C program that a string as an argument and return all the files that begins with that name
in the current directory. For example > ./a.out foo will return all file names that begins with foo

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <dirent.h>

void to_lowercase(const char *src, char *dest) {
    while (*src) {
        *dest++ = tolower(*src++);
    }
    *dest = '\0';
}

int main(int argc, char *argv[]) {
    // Check if the program received the argument
    if (argc != 2) {
        printf("Usage: %s <prefix>\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    char *prefix = argv[1];
    struct dirent *entry;
    DIR *dp = opendir(".");

    // Check if the current directory can be opened
    if (dp == NULL) {
        perror("Error opening current directory");
        exit(EXIT_FAILURE);
    }

    printf("Files starting with '%s':\n", prefix);

    // Convert the prefix to lowercase for case-insensitive comparison
    char prefix_lower[256];
    to_lowercase(prefix, prefix_lower);
    size_t prefix_len = strlen(prefix_lower);

    // Warn if the prefix is empty
    if (prefix_len == 0) {
        printf("Warning: Empty prefix provided. Listing all files.\n");
    }

    // Read through the directory and match filenames
    while ((entry = readdir(dp)) != NULL) {
        // Check if the entry is a regular file
        #ifdef DT_REG
        if (entry->d_type != DT_REG) {
            continue; // Skip if it's not a regular file
        }
        #endif

        // Convert the filename to lowercase
        char filename_lower[256];
        to_lowercase(entry->d_name, filename_lower);

        // Check if the file name starts with the given prefix
        if (strncmp(filename_lower, prefix_lower, prefix_len) == 0) {
            printf("%s\n", entry->d_name);
        }
    }

    closedir(dp);
    return 0;
}

gcc slip13_2.c -o slip13_2
./a.out foo or ./slip13_2 foo (run)

